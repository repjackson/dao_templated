template(name='topup_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .six.wide.column
                    .ui.inline.header
                        i.pencil.icon
                        | #{title}
                        small topup
                    a.ui.large.icon.green.button(href="/topup/#{_id}/" title='save product')
                        i.checkmark.big.icon
                    +text_edit key='title' label='title' direct=true
                    +image_edit key='image_id' label='image' direct=true
                    div
                    +boolean_edit key='has_user_assignment' label='has user assignment' direct=true
                    if has_user_assignment
                        each group_members
                            .ui.button.assign_member #{username}
                    div
                    +boolean_edit key='has_minute_expectation' label='has minute expectation' direct=true
                    div
                    if has_minute_expectation
                        +number_edit key='minute_expectation' label='time expectation (minutes)' direct=true
                    div
                    +boolean_edit key='has_duedatetime' label='has due date/time' icon='calendar' direct=true
                    div
                    if has_duedatetime
                        +datetime_edit key='due_datetime' label='due date/time' icon='calendar' direct=true
                    +number_edit key='amount' label='amount (leave 0 for infinite)' direct=true
                    div
                    +boolean_edit key='has_point_bounty' label='has point bounty' icon='hashtag' direct=true
                    div
                    if has_point_bounty
                        +number_edit key='point_bounty' label='point_bounty' direct=true
                    div
                .ten.wide.column
                    .ui.header 
                        |topup amount
                        |#{topup_amount}
                    div
                    +boolean_edit key='has_subgroup_specification' label='has specific subgroup' icon='users' direct=true
                    div
                    .ui.header     
                        i.users.icon
                        |subgroup availability
                    each current_subgroups
                        .ui.button.select_subgroup(class=subgroup_class)
                            img.ui.tiny.inline.image(src="{{c.url image_id width=400 height=300 crop='pad'}}")
                            |#{title}
                    +number_edit key='amount' label='amount (leave 0 for infinite)' direct=true
                    +html_edit key='description' label='description' direct=true
                    .ui.header     
                        i.large.marker.icon
                        |possible locations
                    each topup_locations
                        .ui.button.select_location(class=location_class)
                            img.ui.tiny.inline.image(src="{{c.url image_id width=400 height=300 crop='pad'}}")
                            |#{title}
                    +array_edit key='tags' label='tags' icon='tags' direct=true
                    .ui.red.button.delete_topup
                        i.remove.icon   
                        | delete
                    +print_this

                
template(name='topup_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .six.wide.column
                    a.ui.basic.icon.button.fly_left(href="/topups")
                        i.small.chevron.left.icon
                        i.large.money.icon
                    .ui.inline.header
                        | #{title}
                        small topup view
                    +image_view key='image_id' label='image' direct=true
                    div
                    a.ui.icon.button(href="/topup/#{_id}/edit")
                        i.pencil.icon
                    +boolean_view key='has_user_assignment' label='has user assignment' direct=true
                    if has_user_assignment
                        each group_members
                            .ui.button.assign_member #{username}
                    +boolean_view key='has_minute_expectation' label='has minute expectation' direct=true
                    if has_minute_expectation
                        +number_view key='minute_expectation' label='time expectation (minutes)' direct=true
                    +boolean_view key='has_duedatetime' label='has due date/time' icon='calendar' direct=true
                    if has_duedatetime
                        +datetime_view key='due_datetime' label='due date/time' icon='calendar' direct=true
                    +number_view key='amount' label='amount (leave 0 for infinite)' direct=true
                    +boolean_view key='has_point_bounty' label='has point bounty' icon='hashtag' direct=true
                    if has_point_bounty
                        +number_view key='point_bounty' label='point_bounty' direct=true
                        
                .ten.wide.column
                    .ui.header topup amount 
                        |#{topup_amount}
                    .ui.header 
                        i.stripe.icon
                        |stripe object for dev
                    div.scrolling
                        +html_view key='notes' label='directions' direct=true
                    // .ui.inline.header 
                    //     i.large.marker.icon
                    //     |possible locations
                    // each possible_locations
                    //     .ui.large.label #{title}
                    div
                    .ui.header 
                        i.tag.icon
                        |tags
                    +array_view key='tags' label='tags' icon='tags' direct=true
                    if currentUser
                        .ui.button.record_work
                            |record work
                    .ui.header 
                        i.wrench.icon
                        |work
                    .ui.selection.animated.list
                        each topup_work
                            a.item(href="/work/#{_id}") 
                                img.ui.tiny.inline.image(src="{{c.url image_id width=400 height=300 crop='pad'}}")
                                if before_image_id
                                    img.ui.tiny.inline.image(src="{{c.url before_image_id width=400 height=300 crop='pad'}}")
                                if before_image_id
                                    img.ui.tiny.inline.image(src="{{c.url after_image_id width=400 height=300 crop='pad'}}")
                                |#{when} #{_author_username}
                    +html_view key='description' label='description' direct=true
                    +voting_full
                    +print_this
                    +comments
                        
                        
                        
// template(name='locations')
//     .ui.stackable.padded.grid
//         .sixteen.wide.column
//             .ui.inline.header 
//                 i.large.marker.icon
//                 |locations
//             .ui.basic.icon.button.add_location
//                 i.large.plus.icon
//             // each picked_sections
//             //     button.ui.blue.compact.small.button.unpick_section(tabindex='0')
//             //         //- i.remove.icon
//             //         | #{this}
//             // // div
//             // +i name='clock' cl='ui inline mini image'
//             // each sections
//             //     button.ui.compact.basic.button.pick_section(tabindex="0" class=result_class title=count) #{title}
//             //         //- small #{count}
//             // // unless one_post
//             span.sorting_row
//                 // +session_set key='view_users' value='grid' icon='th' 
//                 // +session_set key='view_users' value='list' icon='list'
//                 // +session_set key='sort_users_direction' value='-1' icon='chevron down'
//                 // +session_set key='sort_users_direction' value='1' icon='chevron up'
//                 // +session_set key='sort_users_key' value='points' icon='coins'
//                 // +session_set key='sort_users_key' value='created_date' icon='clock'
//                 // +session_set key='view_limit' value=1
                
//                 i.large.sort.icon
//                 .ui.compact.icon.button.set_sort_direction(title='toggle sort direction')
//                     if sorting_up
//                         i.sort.amount.down.icon
//                     else
//                         i.sort.amount.up.icon
//                 |&nbsp;
//                 |&nbsp;
//                 // .ui.compact.menu
//                 //     .ui.simple.dropdown.item
//                 //         strong #{product_limit}
//                 //         i.dropdown.icon
//                 //         .menu
//                         //   +set_product_limit amount=1
//                           +set_product_limit amount=5
//                           +set_product_limit amount=10
//                             +set_product_limit amount=20
//                 .spacer 
        
//             span.ui.stackable.cards.scrolling
//                 each location_docs
//                     a.ui.card(href="/location/#{_id}") 
//                         img.ui.image(src="{{c.url image_id width=400 height=300 crop='pad'}}")
//                         .content 
//                             .ui.header 
//                                 |#{title}


                
template(name='location_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .six.wide.column
                    .ui.inline.header
                        i.pencil.icon
                        | #{title}
                        small location
                    a.ui.large.icon.green.button(href="/location/#{_id}/" title='save product')
                        i.checkmark.big.icon
                    +text_edit key='title' label='title' direct=true
                    +image_edit key='image_id' label='image' direct=true
                    div
                .ten.wide.column
                    div
                    // +html_edit key='directions' label='directions' direct=true
                    +array_edit key='tags' label='tags' icon='tags' direct=true
                    .ui.red.button.delete_location
                        i.remove.icon   
                        | delete
                
                
template(name='location_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column
                    a.ui.basic.icon.button(href="/locations")
                        i.store.large.icon
                    .ui.inline.header
                        | #{title}
                        small location view
                    +image_view key='image_id' label='image' direct=true
                    div
                    a.ui.icon.button(href="/location/#{_id}/edit")
                        i.pencil.icon
                .eight.wide.column
                    .ui.header 
                        +i name='meal'
                        |productes
                    .ui.large.selection.link.animated.list
                        each group_products
                            .item 
                                a.ui.header(href="/product/#{") #{title}
                    .ui.header 
                        +i name='chef-hat'
                        |staff
                    .ui.large.selection.link.animated.list
                        each location_staff
                            .item 
                                .ui.header #{title}
                    +comments
                .four.wide.column
                    div
                    +html_view key='description' label='description' direct=true
                        
                        
                        
template(name='ingredient_card')
    if session_is 'editing_ingredient' _id
        .ui.card
            +image_edit key='image_id' direct=true
            .content
                +text_edit key='title' direct=true
                i.checkmark.circular.link.green.icon.save_ingredient   
                +boolean_edit key='archived' label='archived' icon='archive' direct=true
    else
        .ui.card
            // if unless
            a(href="/ingredient/#{_id}")
                img.ui.image.pointer(src="{{c.url image_id width=500 height=500 gravity='face' crop='fill'}}")
            // else
            //     img.ui.image(src="{{c.url image_id width=500 height=500 gravity='face' crop='fill'}}")
            .content
                .ui.inline.header #{title}
                .ui.basic.button.request_ingredient
                    i.dolly.green.icon
                    |request
                if is_admin
                    i.pencil.circular.link.icon.edit_ingredient            
                if session_is 'admin_mode' true
                    a.ui.icon.button(href="/ingredient/#{_id}/edit")
                        i.pencil.icon


template(name='ingredient_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .six.wide.column
                    .ui.inline.header
                        i.pencil.icon
                        | #{title}
                        small ingredient
                    a.ui.large.icon.green.button(href="/ingredient/#{_id}/" title='save product')
                        i.checkmark.big.icon
                    +text_edit key='title' label='title' direct=true
                    +image_edit key='image_id' label='image' direct=true
                    +number_edit key='serving_size_grams' label='serving size (grams)' direct=true
                    +number_edit key='calories_per_serving_size' label='calories per serving size' direct=true
                    +number_edit key='fat_per_serving_size' label='fat per serving size (g)' direct=true
                    +text_edit key='location' label='location' direct=true
                    +date_edit key='date_arrived' label='date arrived' direct=true
                    div
                .ten.wide.column
                    div
                    +textarea_edit key='description' label='description' direct=true
                    +array_edit key='tags' label='tags' icon='tags' direct=true
                    .ui.red.button.delete_ingredient
                        i.remove.icon   
                        | delete
                
                
template(name='ingredient_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .four.wide.column
                    a.ui.basic.large.icon.button.fly_left(href="/ingredients")
                        i.chevron.left.icon
                        i.large.food.icon
                    .ui.inline.header
                        | #{title}
                        small ingredient view
                    div
                    a.ui.icon.basic.button(href="/ingredient/#{_id}/edit")
                        i.pencil.icon
                    +array_view key='tags' label='tags' icon='tags' direct=true
                    +textarea_view key='description' label='description' direct=true
                    +text_view key='location' label='location' direct=true
                    +date_view key='date_arrived' label='date arrived' direct=true
                    .ui.header products included 
                    .ui.large.link.selection.list
                        each ingredient_products
                            a.item(href="/product/#{_id}") 
                                .content 
                                    .header 
                                        |#{title}
                .eight.wide.column
                    div.scrolling
                        +html_view key='notes' label='directions' direct=true                    
                    +text_view key='title' label='title' direct=true
                    +image_view key='image_id' label='image' direct=true
                    div
                .four.wide.column
                    +html_view key='description' label='description' direct=true
                    +voting_full
                    +comments
                        