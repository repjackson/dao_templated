template(name='topup_edit')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .six.wide.column
                    .ui.inline.header
                        i.pencil.icon
                        | #{title}
                        small topup
                    a.ui.large.icon.green.button(href="/topup/#{_id}/" title='save product')
                        i.checkmark.big.icon
                    +text_edit key='title' label='title' direct=true
                    +image_edit key='image_id' label='image' direct=true
                    div
                    +boolean_edit key='has_user_assignment' label='has user assignment' direct=true
                    if has_user_assignment
                        each group_members
                            .ui.button.assign_member #{username}
                    div
                    +boolean_edit key='has_minute_expectation' label='has minute expectation' direct=true
                    div
                    if has_minute_expectation
                        +number_edit key='minute_expectation' label='time expectation (minutes)' direct=true
                    div
                    +boolean_edit key='has_duedatetime' label='has due date/time' icon='calendar' direct=true
                    div
                    if has_duedatetime
                        +datetime_edit key='due_datetime' label='due date/time' icon='calendar' direct=true
                    +number_edit key='amount' label='amount (leave 0 for infinite)' direct=true
                    div
                    +boolean_edit key='has_point_bounty' label='has point bounty' icon='hashtag' direct=true
                    div
                    if has_point_bounty
                        +number_edit key='point_bounty' label='point_bounty' direct=true
                    div
                .ten.wide.column
                    .ui.header 
                        |topup amount
                        |#{topup_amount}
                    div
                    +boolean_edit key='has_subgroup_specification' label='has specific subgroup' icon='users' direct=true
                    div
                    .ui.header     
                        i.users.icon
                        |subgroup availability
                    each current_subgroups
                        .ui.button.select_subgroup(class=subgroup_class)
                            img.ui.tiny.inline.image(src="{{c.url image_id width=400 height=300 crop='pad'}}")
                            |#{title}
                    +number_edit key='amount' label='amount (leave 0 for infinite)' direct=true
                    +html_edit key='description' label='description' direct=true
                    .ui.header     
                        i.large.marker.icon
                        |possible locations
                    each topup_locations
                        .ui.button.select_location(class=location_class)
                            img.ui.tiny.inline.image(src="{{c.url image_id width=400 height=300 crop='pad'}}")
                            |#{title}
                    +array_edit key='tags' label='tags' icon='tags' direct=true
                    .ui.red.button.delete_topup
                        i.remove.icon   
                        | delete
                    +print_this

                
template(name='topup_view')
    with current_doc
        .ui.stackable.padded.grid
            .row
                .six.wide.column
                    a.ui.basic.icon.button.fly_left(href="/topups")
                        i.small.chevron.left.icon
                        i.large.money.icon
                    .ui.inline.header
                        | #{title}
                        small topup view
                    +image_view key='image_id' label='image' direct=true
                    div
                    a.ui.icon.button(href="/topup/#{_id}/edit")
                        i.pencil.icon
                    +boolean_view key='has_user_assignment' label='has user assignment' direct=true
                    if has_user_assignment
                        each group_members
                            .ui.button.assign_member #{username}
                    +boolean_view key='has_minute_expectation' label='has minute expectation' direct=true
                    if has_minute_expectation
                        +number_view key='minute_expectation' label='time expectation (minutes)' direct=true
                    +boolean_view key='has_duedatetime' label='has due date/time' icon='calendar' direct=true
                    if has_duedatetime
                        +datetime_view key='due_datetime' label='due date/time' icon='calendar' direct=true
                    +number_view key='amount' label='amount (leave 0 for infinite)' direct=true
                    +boolean_view key='has_point_bounty' label='has point bounty' icon='hashtag' direct=true
                    if has_point_bounty
                        +number_view key='point_bounty' label='point_bounty' direct=true
                        
                .ten.wide.column
                    .ui.header topup amount 
                        |#{topup_amount}
                    .ui.header 
                        i.stripe.icon
                        |stripe object for dev
                    div.scrolling
                        +html_view key='notes' label='directions' direct=true
                    // .ui.inline.header 
                    //     i.large.marker.icon
                    //     |possible locations
                    // each possible_locations
                    //     .ui.large.label #{title}
                    div
                    .ui.header 
                        i.tag.icon
                        |tags
                    +array_view key='tags' label='tags' icon='tags' direct=true
                    if currentUser
                        .ui.button.record_work
                            |record work
                    .ui.header 
                        i.wrench.icon
                        |work
                    .ui.selection.animated.list
                        each topup_work
                            a.item(href="/work/#{_id}") 
                                img.ui.tiny.inline.image(src="{{c.url image_id width=400 height=300 crop='pad'}}")
                                if before_image_id
                                    img.ui.tiny.inline.image(src="{{c.url before_image_id width=400 height=300 crop='pad'}}")
                                if before_image_id
                                    img.ui.tiny.inline.image(src="{{c.url after_image_id width=400 height=300 crop='pad'}}")
                                |#{when} #{_author_username}
                    +html_view key='description' label='description' direct=true
                    +voting_full
                    +print_this
                    +comments
                        