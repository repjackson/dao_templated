template(name='users')
    .ui.padded.stackable.grid
        .three.wide.column
            .ui.header 
                // i.large.users.icon
                +i name='groups'
                |users
            +user_cloud
            +session_set key='user_sort_filter' value='total sent'               
            +session_set key='user_sort_filter' value='total received'
            +session_set key='user_sort_filter' value='# sent'
            +session_set key='user_sort_filter' value='# received'
            +session_set key='user_sort_filter' value='current points'
            +leaderboard

        .thirteen.wide.column
            if users.count
                .scrolling.ui.four.stackable.cards
                    each users
                        +user_card
            else
                .ui.basic.segment
                    i.massive.loading.grey.users.icon



template(name='leaderboard')
    .ui.header 
        +i name='leaderboard'
        |today's leaderboard
    .ui.small.header 
        +i name='send' cl='ui avatar image'
        |sent
    .ui.large.link.selection.list
        each most_sent_today
            a.item(href="/user/#{username}") #{username}: #{total_sent_day}p
    .ui.small.header 
        +i name='donate' cl='ui avatar image'
        |received
    .ui.large.link.selection.list
        each most_received_today
            a.item(href="/user/#{username}") #{username}: #{total_received_day}p



template(name='user_cloud')
    div
    +i name='tag'
    if selected_user_tags
        #clear_tags.ui.primary.icon.compact.button
            i.remove.icon
        each selected_user_tags
            .unselect_tag.ui.primary.compact.button
                strong #{this}
    each all_tags
        .ui.compact.basic.button.select_tag(class=cloud_tag_class) 
            strong #{this.name}



template(name='user_card')
    a.card.rounded.pointer.zoomer.fly_right(href="/user/#{username}")
        img.ui.image(src="{{c.url image_id width=400 height=300 crop='fill'}}")    
        .content
            a.ui.inline.header(href="/user/#{username}" class=theme_color) 
                |#{name}
                //- |#{username}
                // if spirit_animal
                //     +icolor name=spirit_animal cl='ui avatar image'
            .ui.big.basic.label #{points}pts
            // each levels
            //     .ui.label #{this}
            .ui.large.basic.label #{total_received}p received (##{received_rank})
            .ui.large.basic.label #{total_sent}p sent (##{sent_rank})
            // strong #{debit_count}
            // strong {{credit_ratio}}
            // span ##{global_debit_count_rank}
            // span ##{global_credit_count_rank}
        .ui.attached.basic.buttons
            .ui.icon.button
                |#{comment_count}
                i.chat.outline.icon
            .ui.icon.button
                |#{views}
                i.eye.icon
            .ui.icon.button
                |#{upvotes}
                i.thumbs.up.outline.icon
            .ui.icon.button
                |#{downvotes}
                i.thumbs.down.outline.icon

                    

template(name='addtoset_user')
    // .ui.small.compact.button.toggle_value(class=ats_class) #{key} #{value}
    .ui.small.compact.button.toggle_value(class=ats_class) +#{value}